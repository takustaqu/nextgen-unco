/** 
 * Creates cardboard app. Initialize three.js app for you.
 * @class
 * @property {THREE.Scene} scene Default scene. See {@link http://threejs.org/docs/#Reference/Scenes/Scene|THREE.Scene} document.
 * @property {THREE.Camera} camera Default camera. See {@link http://threejs.org/docs/#Reference/Cameras/Camera|THREE.Camera} and {@link http://threejs.org/docs/#Reference/Cameras/PerspectiveCamera|THREE.PerspectiveCamera} documents.
 * @property {THREE.WebGLRenderer} renderer Default renderer. See {@link http://threejs.org/docs/#Reference/Renderers/WebGLRenderer|THREE.WebGLRenderer} document.
 */
function CardboardApp(){function e(){var e=window.innerWidth,t=window.innerHeight;n.camera.aspect=e/t,n.camera.updateProjectionMatrix(),n.vr=e>=t,r.setSize(e,t)}var n=this,t=n.renderer=new THREE.WebGLRenderer({antialias:!0}),r=new THREE.StereoEffect(t),o=new THREE.Clock,i=new CardboardApp.State;n.scene=new THREE.Scene,n.camera=new THREE.PerspectiveCamera(90,1,.01,1e3),n.vr=!0,document.body.appendChild(t.domElement);var u=new THREE.DeviceOrientationControls(n.camera,!0);u.connect(),setTimeout(e,1),window.addEventListener("resize",e,!1),n.on("touchstart",function(){i.touching=!0}).on("touchend",function(){i.touching=!1}).on("mousedown",function(){i.touching=!0}).on("mouseup",function(){i.touching=!1}),function a(){requestAnimationFrame(a),n.camera.updateProjectionMatrix(),u.update(),i.dt=o.getDelta(),n.emit("update",{detail:i}),(n.vr?r:t).render(n.scene,n.camera)}()}CardboardApp.prototype={on:function(e,n){return this.renderer.domElement.addEventListener(e,n),this},off:function(e,n){return this.renderer.domElement.removeEventListener(e,n),this},emit:function(e,n){var t=new CustomEvent(e,n);return this.renderer.domElement.dispatchEvent(t),this},requestFullscreen:function(){var e=this.renderer.domElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}},CardboardApp.State=function(){this.dt=0,this.touching=!1};